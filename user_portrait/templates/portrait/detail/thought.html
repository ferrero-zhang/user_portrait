 <style type="text/css">   
    .border-table {   
        border-collapse: collapse;   
        border: none;   
    }   
    .border-table td {   
        border: solid #FFE4B5 1px;   
    }   
</style>
<div>该用户的心情</div>
<div style="width:100%;text-align:right;font-size:20px;margin:8px;">
   <input type="radio" name="time-type" value=1 onclick="choose_time()" style="width:15px;height:15px;margin-left:8px;" checked >每日变动情况
   <input type="radio" name="time-type" value=2  onclick="choose_time()" style="width:15px;height:15px;margin-left:8px;">每周变动情况
</div>
<div style="width:680px;height:400px;" id="emotion"></div>
<div style="width:300px;height:400px;" id="content"></div>
<div style="width:998px;"><h4 class="page-header"style='margin-top:10px'>倾向性和心理状态</h4>
	<div>
		<div style="height:380px;width:450px;float:left;margin-top:-20px">
		<div style="font-size:16px">倾向性</div>
		<div id="radar_domain" style="height:350px;width:450px;"></div>
		</div>
		<div style="height:380px;width:450px;float:right;margin-top:-20px">
		<div style="font-size:16px">心理状态</div>
		<div id="pie_emotion" style="height:350px;width:450px;"></div>
		</div>
	</div>	
</div>
<script src="http://echarts.baidu.com/build/dist/echarts-all.js"></script>
 <script type="text/javascript">
  window.onload=function(){
        var index=1;
 		Draw_think_topic();
 		Draw_think_emotion();
        choose_time();
        //Draw_emotion(index);
 	}

function choose_time(){
//$('input[name="time-type"]').click(function(){                  
  index = $('input[name="time-type"]:checked').val();
  if(index == 1){
    //$('#emotion').empty();
    Draw_emotion(index);
    //console.log(url);
    //Influence.call_sync_ajax_request(url, Influence.ajax_method, Influence.Draw_influence);
  }else{
    //$('#emotion').empty();
    Draw_emotion(index);
  }
}
//)}

function draw_content(data){
    var html = '';
    $('#content').empty();
    if(data==''){
        html += "<div style='width:100%;'><span style='margin-left:20px;'>该时段用户未发布任何微博</span></div>";
    }else{
        for(i=0;i<data.length;i++){
            //console.log(data[i].text);
            html += "<div style='width:100%;'><img src='/static/img/pencil-icon.png' style='height:10px;width:10px;margin:0px;margin-right:10px;'><span>"+data[i].text+"</span></div>";
        }

    }
    $('#content').append(html);
}

function Draw_emotion(times){
    var nodes = [];
    if (times == 1){
        nodes = ['周一','周二','周三','周四','周五','周六','周日'];
    }
    else {
        nodes = ['第一周','第二周','第三周','第四周','第五周','第六周','第七周'];
    };
    console.log(nodes);
    var myChart = echarts.init(document.getElementById('emotion')); 
    console.log('aa');
    var option = {
    title : {
        text: '未来一周气温变化',
        subtext: '纯属虚构'
    },
    tooltip : {
        trigger: 'axis'
    },
    legend: {
        data:['最高气温','最低气温']
    },
    toolbox: {
        show : true,
        feature : {
            mark : {show: true},
            dataView : {show: true, readOnly: false},
            magicType : {show: true, type: ['line', 'bar']},
            restore : {show: true},
            saveAsImage : {show: true}
        }
    },
    calculable : true,
    xAxis : [
        {
            type : 'category',
            boundaryGap : false,
            data : nodes
        }
    ],
    yAxis : [
        {
            type : 'value',
            axisLabel : {
                formatter: '{value} °C'
            }
        }
    ],
    series : [
        {
            name:'最高气温',
            type:'line',
            data:[11, 11, 15, 13, 12, 13, 10],
            markPoint : {
                data : [
                    {type : 'max', name: '最大值'},
                    {type : 'min', name: '最小值'}
                ]
            },
            markLine : {
                data : [
                    {type : 'average', name: '平均值'}
                ]
            }
        },
        {
            name:'最低气温',
            type:'line',
            data:[1, -2, 2, 5, 3, 2, 0],
            markPoint : {
                data : [
                    {name : '周最低', value : -2, xAxis: 1, yAxis: -1.5}
                ]
            },
            markLine : {
                data : [
                    {type : 'average', name : '平均值'}
                ]
            }
        }
    ]
};
    myChart.setOption(option);     
}

        // 基于准备好的dom，初始化echarts图表
function Draw_think_topic(){
    // domain_value = [];
    // domain_key = [];
    // indicate = [];
    // for ( key in data['2']){
    //      indicator = {};
    //     domain_key.push(key);
    //     indicator['text'] = key;
    //     indicator['max'] = 20;
    //     indicate.push(indicator);
    //     domain_value.push(data['2'][key]);
    // }
    var myChart = echarts.init(document.getElementById('radar_domain')); 
        
        var option = {
        title : {
            text: '',
            subtext: ''
        },
        tooltip : {
            trigger: 'axis'
        },
        legend: {
            x : 'center',
            data:['倾向性']
        },
        toolbox: {
            show : true,
            feature : {
                saveAsImage : {show: true}
            }
        },
        calculable : true,
        polar : [
            {
            indicator : [
                {text : '九一八', max  : 100},
                {text : '博鳌论坛', max  : 100},
                {text : 'APEC', max  : 100},
                {text : '两会', max  : 100}],
                radius : 80
            }
        ],
        series : [
            {
                name: '',
                type: 'radar',
                itemStyle: {
                    normal: {
                        areaStyle: {
                            type: 'default'
                        }
                    }
                },
                data : [
                    {
                        value : [97, 42, 88, 94, 90, 86],
                        name : '倾向性'
                    }
                ]
            }
        ]
    };                
        // 为echarts对象加载数据 
        myChart.setOption(option); 
}
function Draw_think_emotion(){
    var myChart = echarts.init(document.getElementById('pie_emotion')); 
    var option = {
    tooltip : {
        trigger: 'item',
        formatter: "{a} <br/>{b} : {c} ({d}%)"
    },
    toolbox: {
        show : true,
        feature : {
            mark : {show: false},
            dataView : {show: false, readOnly: false},
            magicType : {
                show: false, 
                type: ['pie', 'funnel']
            },
            restore : {show: false},
            saveAsImage : {show: true}
        }
    },
    calculable : false,
    series : [
        {
            name:'',
            type:'pie',
            selectedMode: 'single',
            radius : [0, 35],
            
            // for funnel
            x: '20%',
            width: '40%',
            funnelAlign: 'right',
            max: 1548,
            
            itemStyle : {
                normal : {
                    label : {
                        position : 'inner'
                    },
                    labelLine : {
                        show : false
                    }
                }
            },
            data:[
                {value:5, name:'积极'},
                {value:5, name:'中性'},
                {value:12, name:'消极', selected:true}
            ]
        },
        {
            name:'',
            type:'pie',
            radius : [50, 70],
            
            // for funnel
            x: '60%',
            width: '35%',
            funnelAlign: 'left',
            max: 1048,
            
            data:[
                {value:5, name:'积极'},
                {value:5, name:'中性'},
                {value:3, name:'生气'},
                {value:4, name:'悲伤'},
                {value:5, name:'其他'}
            ]
        }
    ]
}
    myChart.setOption(option);  
                    
}

    </script>
